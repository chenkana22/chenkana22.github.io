<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>è¨˜æ†¶å¡ç‰ŒéŠæˆ²</title>

<style>
:root {
    --card-size: 100px;
}

/* ===== åŸºæœ¬ ===== */
body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: #eee;
    display: flex;
    flex-direction: column;
    align-items: center;
}

h1 {
    margin: 16px 0;
}

/* ===== ä¸»å®¹å™¨ ===== */
.game-container {
    width: 100%;
    max-width: 1100px;
    padding: 10px;
}

/* ===== æ£‹ç›¤ ===== */
.board {
    display: grid;
    gap: 10px;
    justify-content: center;
    margin: 0 auto;
}

/* ===== å¡ç‰Œ ===== */
.card {
    width: var(--card-size);
    height: var(--card-size);
    perspective: 1000px;
}

.card-inner {
    width: 100%;
    height: 100%;
    transform-style: preserve-3d;
    transition: transform 0.6s;
}

.card-back,
.card-front {
    position: absolute;
    width: 100%;
    height: 100%;
    border-radius: 12px;
    backface-visibility: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
}

/* âœ… è§£æ–¹ä¸€ï¼šåœ–ç‰‡ä¸è£åˆ‡ */
.card-back {
    background-image: url("imagesback.png");
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    background-color: white;
}

.card-front {
    background: #ff9800;
    color: white;
    font-size: 28px;
    transform: rotateY(180deg);
}

.flipped .card-inner,
.matched .card-inner {
    transform: rotateY(180deg);
}

/* ===== é…å°å †ç–Š ===== */
.stack-area {
    background: #bbb;
    border-radius: 10px;
    padding: 10px;
    margin: 15px auto 0;
    text-align: center;
    width: fit-content;
}

/* ===== æ§åˆ¶å€ ===== */
.controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 15px;
}

.restart-btn {
    padding: 10px 18px;
    background: #d32f2f;
    color: white;
    border: none;
    border-radius: 8px;
}

.score-board {
    padding: 10px 18px;
    background: #1976d2;
    color: white;
    border-radius: 8px;
}

/* ===== é—œå¡ ===== */
.levels {
    display: flex;
    gap: 10px;
    justify-content: center;
    margin-top: 15px;
    flex-wrap: wrap;
}

.levels button {
    padding: 8px 14px;
    border-radius: 8px;
    border: none;
    background: #81d4fa;
}

.levels button.active {
    background: #0288d1;
    color: white;
}

/* ===== å‹åˆ©æ–‡å­— ===== */
#winText {
    position: fixed;
    top: 45%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 48px;
    font-weight: bold;
    color: #6fb9dd;
    text-shadow: 0 0 8px white, 0 0 20px #6fb9dd;
    display: none;
    z-index: 999;
}

/* ======================
   ğŸ“± å¹³æ¿
====================== */
@media (max-width: 1024px) {
    :root {
        --card-size: 80px;
    }
}

/* ======================
   ğŸ“± æ‰‹æ©Ÿ
====================== */
@media (max-width: 600px) {
    :root {
        --card-size: 60px;
    }

    .controls {
        flex-direction: column;
        gap: 10px;
    }

    #winText {
        font-size: 36px;
    }
}
</style>
</head>

<body>

<h1>è¨˜æ†¶å¡ç‰ŒéŠæˆ²</h1>
<div id="winText">æŒ‘æˆ°æˆåŠŸï¼</div>

<div class="game-container">

    <div id="board" class="board"></div>

    <div id="stackArea" class="stack-area">é…å°å †ç–Š</div>

    <div class="controls">
        <button id="restartBtn" class="restart-btn">é‡æ–°é–‹å§‹</button>
        <div id="scoreBoard" class="score-board">å¾—åˆ†ï¼š0</div>
    </div>

    <div class="levels">
        <button onclick="setLevel(2,5,this)">ç°¡å–® 2Ã—5</button>
        <button class="active" onclick="setLevel(5,6,this)">ä¸­ç­‰ 5Ã—6</button>
        <button onclick="setLevel(5,8,this)">å›°é›£ 5Ã—8</button>
    </div>

</div>

<script>
const board = document.getElementById("board");
const scoreBoard = document.getElementById("scoreBoard");
const winText = document.getElementById("winText");

let rows = 5, cols = 6;
let totalPairs = 15;
let firstCard = null, secondCard = null;
let lockBoard = false, score = 0;

function setLevel(r, c, btn) {
    rows = r;
    cols = c;
    totalPairs = (r * c) / 2;

    document.querySelectorAll(".levels button").forEach(b => b.classList.remove("active"));
    btn.classList.add("active");

    createBoard();
}

function generateCards() {
    const arr = [];
    for (let i = 1; i <= totalPairs; i++) arr.push(i, i);
    return arr.sort(() => Math.random() - 0.5);
}

function createBoard() {
    board.innerHTML = "";
    score = 0;
    scoreBoard.textContent = "å¾—åˆ†ï¼š" + score;
    winText.style.display = "none";

    board.style.gridTemplateColumns = `repeat(${cols}, var(--card-size))`;

    generateCards().forEach(v => {
        const card = document.createElement("div");
        card.className = "card";
        card.dataset.value = v;
        card.innerHTML = `
            <div class="card-inner">
                <div class="card-back"></div>
                <div class="card-front">${v}</div>
            </div>`;
        card.onclick = () => flip(card);
        board.appendChild(card);
    });
}

function flip(card) {
    if (lockBoard || card === firstCard || card.classList.contains("matched")) return;
    card.classList.add("flipped");

    if (!firstCard) return firstCard = card;

    secondCard = card;
    lockBoard = true;
    setTimeout(check, 600);
}

function check() {
    if (firstCard.dataset.value === secondCard.dataset.value) {
        firstCard.classList.add("matched");
        secondCard.classList.add("matched");
        score++;
        scoreBoard.textContent = "å¾—åˆ†ï¼š" + score;
        if (score === totalPairs) winText.style.display = "block";
    } else {
        firstCard.classList.remove("flipped");
        secondCard.classList.remove("flipped");
    }
    firstCard = secondCard = null;
    lockBoard = false;
}

document.getElementById("restartBtn").onclick = createBoard;
createBoard();
</script>

</body>
</html>
